<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="FrontEnd," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.2" />






<meta name="description" content="POST提交数据的几种方式项目中遇到点HTTP请求的问题，关于Ajax提交表单方面。基础知识在大学的时候都接触过，但是实际工程项目中，还是有不扎实的地方，并且随着技术的进步，协议和各种框架请求方式都在更新，趁这个机会，搜些资料，总结和巩固一下这块知识。 遇到的场景是AngularJS中，想利用Ajax技术，Post请求进行表单提交的操作，无File类型文件提交，服务器端用PHP语言编写。 先从基础">
<meta name="keywords" content="FrontEnd">
<meta property="og:type" content="article">
<meta property="og:title" content="POST提交数据">
<meta property="og:url" content="http://yoursite.com/2017/10/30/POST提交数据/index.html">
<meta property="og:site_name" content="Jason Li">
<meta property="og:description" content="POST提交数据的几种方式项目中遇到点HTTP请求的问题，关于Ajax提交表单方面。基础知识在大学的时候都接触过，但是实际工程项目中，还是有不扎实的地方，并且随着技术的进步，协议和各种框架请求方式都在更新，趁这个机会，搜些资料，总结和巩固一下这块知识。 遇到的场景是AngularJS中，想利用Ajax技术，Post请求进行表单提交的操作，无File类型文件提交，服务器端用PHP语言编写。 先从基础">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2017-11-01T07:20:55.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="POST提交数据">
<meta name="twitter:description" content="POST提交数据的几种方式项目中遇到点HTTP请求的问题，关于Ajax提交表单方面。基础知识在大学的时候都接触过，但是实际工程项目中，还是有不扎实的地方，并且随着技术的进步，协议和各种框架请求方式都在更新，趁这个机会，搜些资料，总结和巩固一下这块知识。 遇到的场景是AngularJS中，想利用Ajax技术，Post请求进行表单提交的操作，无File类型文件提交，服务器端用PHP语言编写。 先从基础">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"always"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    }
  };
</script>




  <link rel="canonical" href="http://yoursite.com/2017/10/30/POST提交数据/"/>


  <title> POST提交数据 | Jason Li </title>
</head>

<body itemscope itemtype="//schema.org/WebPage" lang="en">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="//schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Jason Li</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404.html" rel="section">
            
            公益404
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                POST提交数据
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2017-10-30T11:35:29+08:00" content="2017-10-30">
              2017-10-30
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/FrontEnd/" itemprop="url" rel="index">
                    <span itemprop="name">FrontEnd</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <h3 id="POST提交数据的几种方式"><a href="#POST提交数据的几种方式" class="headerlink" title="POST提交数据的几种方式"></a>POST提交数据的几种方式</h3><p>项目中遇到点HTTP请求的问题，关于Ajax提交表单方面。基础知识在大学的时候都接触过，但是实际工程项目中，还是有不扎实的地方，并且随着技术的进步，协议和各种框架请求方式都在更新，趁这个机会，搜些资料，总结和巩固一下这块知识。</p>
<p>遇到的场景是AngularJS中，想利用Ajax技术，Post请求进行表单提交的操作，无File类型文件提交，服务器端用PHP语言编写。</p>
<p>先从基础看起。</p>
<a id="more"></a>
<h4 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h4><h5 id="HTTP简介"><a href="#HTTP简介" class="headerlink" title="HTTP简介"></a>HTTP简介</h5><p>HTTP(HyperText Transfer Protocol)是一套计算机通过网络进行通信的规则。HTTP目前协议的版本是HTTP1.1，是一种无状态的协议。</p>
<p><strong>无状态</strong>是指Web浏览器和Web服务器之间不需要建立持久的连接，这意味着当一个客户端向服务器端发出请求，然后Web服务器返回响应(response)，连接就被关闭了，在服务器端不保留连接的有关信息。</p>
<h5 id="HTTP通信"><a href="#HTTP通信" class="headerlink" title="HTTP通信"></a>HTTP通信</h5><p>HTTP通信TCP三次握手就不用多说了，大学都学过。参考了些资料，简单介绍下通信过程。</p>
<p>HTTP遵循请求(Request)/应答(Response)模型。</p>
<p>Web浏览器向Web服务器发送请求，Web服务器处理请求并返回适当的应答。所有HTTP连接都被构造成一套请求和应答。</p>
<p>一次完整的HTTP通信</p>
<ul>
<li>建立TCP连接</li>
<li>Web Browser向Server发送请求</li>
<li><p>Web Browser发送请求头信息。</p>
<ul>
<li>浏览器发送其请求之后，还要以头信息的形式向Web服务器发送其它信息，之后浏览器发送了一空白行来通知服务器，它已经结束了该头信息的发送。</li>
</ul>
</li>
<li><p>Web Server应答</p>
<ul>
<li>HTTP/1.1 200 OK 这样的版本号和应答状态码</li>
</ul>
</li>
<li>Web Server发送应答头信息</li>
<li>Web Server-&gt;Browser发送数据<ul>
<li>Web Server向Browser发送头信息后，它会发送一个空白行来表示头信息的发送到此为结束，接着，它就以Content-Type应答头信息所描述的格式发送用户所请求的实际数据。</li>
</ul>
</li>
<li>Web Server关闭TCP连接<ul>
<li>一般情况下，一旦Web Server向Browser发送了请求数据，它就要关闭TCP连接，如果浏览器或者服务器在其头信息加入了这行代码,TCP连接会继续打开: </li>
</ul>
</li>
</ul>
<blockquote>
<p>Connection:keep-alive </p>
</blockquote>
<h5 id="URL统一资源定位符"><a href="#URL统一资源定位符" class="headerlink" title="URL统一资源定位符"></a>URL统一资源定位符</h5><p>URI(uniform resource identifier)，统一资源标识符，用来唯一的标识一个资源。而URL是uniform resource locator，统一资源定位器，它是一种具体的URI，即URL可以用来标识一个资源，而且还指明了如何定位这个资源。URN，uniform resource name，统一资源命名，是通过名字来标识资源。</p>
<p>简单来说，URI是以一种抽象的，高层次概念定义统一资源标识，而URL和URN则是具体的资源标识的方式。URL和URN都是一种URI的实现。</p>
<h5 id="HTTP请求"><a href="#HTTP请求" class="headerlink" title="HTTP请求"></a>HTTP请求</h5><p>http请求由三部分组成，分别是：请求行、消息报头、请求正文。</p>
<ul>
<li><strong>请求行</strong></li>
</ul>
<p>请求行以一个方法符号开头，以空格分开，后面跟着请求的URI和协议的版本</p>
<p>格式如下：</p>
<blockquote>
<p>Method Request-URI HTTP-Version CRLF</p>
</blockquote>
<p>其中 Method表示请求方法；Request-URI是一个统一资源标识符；HTTP-Version表示请求的HTTP协议版本；CRLF表示回车和换行（除了作为结尾的CRLF外，不允许出现单独的CR或LF字符）    </p>
<h4 id="请求方法"><a href="#请求方法" class="headerlink" title="请求方法"></a><em>请求方法</em></h4><table>
<thead>
<tr>
<th>请求</th>
<th>示意</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET</td>
<td>请求获取Request-URI所标识的资源</td>
</tr>
<tr>
<td>Post</td>
<td>在Request-URI所标识的资源后附加新的数据</td>
</tr>
<tr>
<td>HEAD</td>
<td>请求获取由Request-URI所标识的资源的响应消息报头</td>
</tr>
<tr>
<td>PUT</td>
<td>请求服务器存储一个资源，并用Request-URI作为其标识</td>
</tr>
<tr>
<td>DELETE</td>
<td>请求服务器回送收到的请求信息，主要用于测试或诊断</td>
</tr>
<tr>
<td>TRACE</td>
<td>在Request-URI所标识的资源后附加新的数据</td>
</tr>
<tr>
<td>CONNECT</td>
<td>保留将来使用</td>
</tr>
<tr>
<td>OPTIONS</td>
<td>请求查询服务器的性能，或者查询与资源相关的选项和需求</td>
</tr>
</tbody>
</table>
<h4 id="Get请求"><a href="#Get请求" class="headerlink" title="Get请求"></a>Get请求</h4><p>GET用于信息获取。</p>
<ul>
<li>GET用于获取信息而非修改信息，</li>
<li>对同一URL的多个请求返回的结果仅有服务器行为决定。（这一点与POST方法有着明显区别）</li>
</ul>
<p><em>注意：</em></p>
<p>.GET请求的数据会附在URL之后（就是把数据放置在HTTP协议头中），以?分割URL和传输数据，参数之间以&amp;相连。</p>
<blockquote>
<p>index.html?name=jason&amp;password=123&amp;verify=%E4%BD%A0%E5%A5%BD</p>
</blockquote>
<ul>
<li>如果数据是英文字母/数字，原样发送</li>
<li>如果是空格，转换为+</li>
<li>如果是中文/其他字符，则直接把字符串用BASE64加密，得出如：%E4%BD%A0%E5%A5%BD，其中％XX中的XX为该符号以16进制表示的ASCII。</li>
</ul>
<p>因为GET是通过URL提交数据，那么GET可提交的数据量就跟URL的长度有直接关系了。Http协议并没有直接限制URL的长度，但是不同的浏览器和服务器通常对URL的长度定义了上限。</p>
<h4 id="Post请求"><a href="#Post请求" class="headerlink" title="Post请求"></a>Post请求</h4><p>都知道POST请求是不把信息暴露在URL上的，所以相对安全。POST把提交的数据则放置在是HTTP包的包体中。</p>
<p>GET和POST只是发送机制不同，并不是一个取一个发。</p>
<p>通过GET提交数据，用户名和密码将明文出现在URL上，因为登录页面有可能被浏览器缓存，其他人查看浏览器的历史纪录，那么别人就可以拿到你的账号和密码了；除此之外，使用GET提交数据还可能会造成Cross-site request forgery攻击。</p>
<h4 id="Head请求"><a href="#Head请求" class="headerlink" title="Head请求"></a>Head请求</h4><p>HEAD方法与GET方法几乎是一样的，对于HEAD请求的回应部分来说，它的HTTP头部中包含的信息与通过GET请求所得到的信息是相同的。利用这个方法，不必传输整个资源内容，就可以得到Request-URI所标识的资源的信息。该方法常用于测试超链接的有效性，是否可以访问，以及最近是否更新。</p>
<ul>
<li><strong>请求头</strong></li>
</ul>
<p>请求头包含许多有关的客户端环境和请求正文的有用信息</p>
<pre><code>Accept:image/gif.image/jpeg.*/*

Accept-Language:zh-cn

Connection:Keep-Alive

Host:localhost

User-Agent:Mozila/4.0(compatible:MSIE5.01:Windows NT5.0)

Accept-Encoding:gzip,deflate.
</code></pre><p>Host请求报头域指定请求资源的Intenet主机和端口号，必须表示请求url的原始服务器或网关的位置。HTTP/1.1请求必须包含主机请求报头域，否则系统会以400状态码返回。</p>
<p>Accept请求报头域用于指定客户端接受哪些类型的信息。eg：Accept：image/gif，表明客户端希望接受GIF图象格式的资源；Accept：text/html，表明客户端希望接受html文本。</p>
<p>Accept-Charset请求报头域用于指定客户端接受的字符集。eg：Accept-Charset:iso-8859-1,gb2312.如果在请求消息中没有设置这个域，缺省是任何字符集都可以接受。</p>
<p>Accept-Encoding请求报头域类似于Accept，但是它是用于指定可接受的内容编码。eg：Accept-Encoding:gzip.deflate.如果请求消息中没有设置这个域服务器假定客户端对各种内容编码都可以接受。</p>
<p>Accept-Language请求报头域类似于Accept，但是它是用于指定一种自然语言。eg：Accept-Language:zh-cn.如果请求消息中没有设置这个请求报头域，服务器假定客户端对各种语言都可以接受。</p>
<p>Authorization请求报头域 主要用于证明客户端有权查看某个资源。当浏览器访问一个页面时，如果收到服务器的响应代码为401（未授权），可以发送一个包含Authorization请求请求报头域的请求，要求服务器对其进行验证。</p>
<p>Referer请求报头域允许客户端指定请求uri的源资源地址，这可以允许服务器生成回退链表，可用来登陆、优化cache等。他也允许废除的或错误的连接由于维护的目的被追踪。</p>
<p>Cache-Control请求报头域 指定请求和响应遵循的缓存机制。在请求消息或响应消息中设置Cache-Control并不会修改另一个消息处理过程中的缓存处理过程。请求时的缓存指令包括no-cache、no-store、max-age、max-stale、min-fresh、only-if-cached，响应消息中的指令包括public、private、no-cache、no-store、no-transform、must-revalidate、proxy-revalidate、max-age。</p>
<p>Date请求报头域表示消息发送的时间，时间的描述格式由rfc822定义。例如，Date:Mon,31Dec200104:25:57GMT。Date描述的时间表示世界标准时，换算成本地时间，需要知道用户所在的时区。</p>
<ul>
<li><strong>请求正文</strong></li>
</ul>
<p>请求头和请求正文之间是一个空行，这个行非常重要，它表示请求头已经结束，接下来的是请求正文。</p>
<h5 id="HTTP应答"><a href="#HTTP应答" class="headerlink" title="HTTP应答"></a>HTTP应答</h5><p>在接收和解释请求消息后，服务器返回一个HTTP响应消息。HTTP响应也是由三个部分组成，分别是：状态行、响应头、响应正文</p>
<ul>
<li><strong>状态行</strong></li>
</ul>
<p>状态行格式：</p>
<pre><code>HTTP-Version Status-Code Reason-Phrase CRLF 
</code></pre><p>HTTP-Version表示服务器HTTP协议的版本；Status-Code表示服务器发回的响应状态代码；Reason-Phrase表示状态代码的文本描述。</p>
<p>状态码：</p>
<p>状态代码有三位数字组成，第一个数字定义了响应的类别，且有五种可能取值：</p>
<p>1xx：指示信息–表示请求已接收，继续处理</p>
<p>2xx：成功–表示请求已被成功接收、理解、接受</p>
<p>3xx：重定向–要完成请求必须进行更进一步的操作</p>
<p>4xx：客户端错误–请求有语法错误或请求无法实现</p>
<p>5xx：服务器端错误–服务器未能实现合法的请求</p>
<p>常见状态码及描述：</p>
<table>
<thead>
<tr>
<th>状态</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>200 OK</td>
<td>客户端请求成功</td>
</tr>
<tr>
<td>400 Bad Request</td>
<td>客户端请求有语法错误，不能被服务器所理解</td>
</tr>
<tr>
<td>401 Unauthorized</td>
<td>请求未经授权，这个状态代码必须和WWW-Authenticate报请求报头域一起使用 </td>
</tr>
<tr>
<td>403 Forbidden</td>
<td>服务器收到请求，但是拒绝提供服务</td>
</tr>
<tr>
<td>404 Not Found</td>
<td>请求资源不存在</td>
</tr>
<tr>
<td>500 Internal Server Error</td>
<td>服务器发生不可预期的错误</td>
</tr>
<tr>
<td>503 Server Unavailable</td>
<td>服务器当前不能处理客户端的请求，一段时间后可能恢复正常</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>响应头</strong></li>
</ul>
<p>响应报头允许服务器传递不能放在状态行中的附加响应信息，以及关于服务器的信息和对Request-URI所标识的资源进行下一步访问的信息。</p>
<p>Location响应报头域用于重定向接受者到一个新的位置。Location响应报头域常用在更换域名的时候。</p>
<p>Server响应报头域 包含了服务器用来处理请求的软件信息。与User-Agent请求报头域是相对应的。</p>
<p>Content-Encoding实体报头域 被用作媒体类型的修饰符，它的值指示了已经被应用到实体正文的附加内容的编码，因而要获得Content-Type报头域中所引用的媒体类型，必须采用相应的解码机制。Content-Encoding这样用于记录文档的压缩方法，</p>
<pre><code>eg：Content-Encoding：gzip
</code></pre><p>Content-Language实体报头域描述了资源所用的自然语言。没有设置该域则认为实体内容将提供给所有的语言阅读者。</p>
<pre><code>eg：Content-Language:da
</code></pre><p>Content-Length实体报头域 用于指明实体正文的长度，以字节方式存储的十进制数字来表示。</p>
<p>Content-Type实体报头域 用语指明发送给接收者的实体正文的媒体类型。<br>    eg：</p>
<pre><code>Content-Type:text/html;charset=ISO-8859-1

Content-Type:text/html;charset=GB2312
</code></pre><p>Last-Modified实体报头域用于指示资源的最后修改日期和时间。</p>
<p>Expires实体报头域 给出响应过期的日期和时间。为了让代理服务器或浏览器在一段时间以后更新缓存中(再次访问曾访问过的页面时，直接从缓存中加载，缩短响应时间和降低服务器负载)的页面，我们可以使用Expires实体报头域指定页面过期的时间。</p>
<ul>
<li><strong>响应正文</strong></li>
</ul>
<p>响应正文即为服务器返回的资源。</p>
<h4 id="常见的POST数据提交方式"><a href="#常见的POST数据提交方式" class="headerlink" title="常见的POST数据提交方式"></a>常见的POST数据提交方式</h4><p>进入正题，我们都知道，HTTP协议是以ASCII码传输，建立在TCP/IP协议之上的应用层规范。</p>
<p>上面介绍到的HTTP请求的三个部分：状态行，请求头，消息主体类似于：</p>
<pre><code>&lt;method&gt; &lt;request-url&gt; &lt;version&gt;
&lt;headers&gt;
&lt;entity-body&gt;&lt;/entity-body&gt;&lt;/headers&gt;&lt;/version&gt;&lt;/request-url&gt;&lt;/method&gt;    
</code></pre><p>协议规定 POST 提交的数据必须放在消息主体（entity-body）中，但协议并没有规定数据必须使用什么编码方式</p>
<p>开发者完全可以自己定义消息主体的格式，只要发送的HTTP请求满足上面格式即可，但是也要保证服务器端可以解析才行，现在一般服务器端语言有Python，Go，php等。</p>
<p>服务端通常是根据请求头（headers）中的 Content-Type 字段来获知请求中的消息主体是用何种方式编码，再对主体进行解析。所以说到 POST 提交数据方案，包含了 Content-Type 和消息主体编码方式两部分。</p>
<ul>
<li><p>第一种</p>
<pre><code>application/x-www-form-urlencoded
</code></pre></li>
</ul>
<p>这应该是最常见的POST提交数据方式了。浏览器原生form表单，如果不设置enctype属性，那最终会以这种格式提交数据。</p>
<pre><code>POST http://www.example.com HTTP/1.1
Content-Type: application/x-www-form-urlencoded;charset=utf-8
title=test&amp;sub%5B%5D=1&amp;sub%5B%5D=2&amp;sub%5B%5D=3
</code></pre><p>Content-Type被指定为 application/x-www-form-urlencoded；</p>
<p>其次，提交的数据按照 key1=val1&amp;key2=val2 的方式进行编码，key 和 val 都进行了 URL 转码。大部分服务端语言都对这种方式有很好的支持。例如 PHP 中，POST[′title′]可以获取到title的值，POST[′title′]可以获取到title的值，_POST[‘sub’] 可以得到 sub 数组</p>
<p>很多时候，我们用 Ajax 提交数据时，也是使用这种方式。</p>
<ul>
<li><p>第二种</p>
<pre><code>multipart/form-data
</code></pre></li>
</ul>
<p>这也是一种常见的POST数据提交方法，表单上传文件的时候，得让form的enctyped等于这个值。</p>
<p>上面提到的这两种 POST 数据的方式，都是浏览器原生支持的，而且<strong>现阶段原生 form 表单也只支持这两种方式</strong>。但是随着越来越多的 Web 站点，尤其是 WebApp，全部使用 Ajax 进行数据交互之后，我们完全可以定义新的数据提交方式，给开发带来更多便利。</p>
<ul>
<li><p>第三种</p>
<pre><code>application/json
</code></pre></li>
</ul>
<p>application/json 这个 Content-Type 作为响应头大家肯定不陌生。实际上，现在越来越多的人把它作为请求头，用来告诉服务端消息主体是序列化后的 JSON 字符串。由于 JSON 规范的流行，除了低版本 IE 之外的各大浏览器都原生支持 JSON.stringify，服务端语言也都有处理 JSON 的函数，使用 JSON 不会遇上什么麻烦。</p>
<p><strong>注：AngularJS中的Ajax功能，默认就是提交JSON字符串</strong></p>
<p>例如：</p>
<pre><code>var data = {&apos;title&apos;:&apos;test&apos;, &apos;sub&apos; : [1,2,3]};

$http.post(url, data).success(function(result) {

...

});
</code></pre><p>最后的请求就是：</p>
<pre><code>POST http://www.example.com HTTP/1.1

Content-Type: application/json;charset=utf-8

{&quot;title&quot;:&quot;test&quot;,&quot;sub&quot;:[1,2,3]}
</code></pre><p>但也有些服务端语言还没有支持这种方式，例如 php 就无法通过 $_POST 对象从上面的请求中获得内容。这时候，需要自己动手处理下：在请求头中 Content-Type 为 application/json 时，从 php://input 里获得原始输入流，再 json_decode 成对象。一些 php 框架已经开始这么做了</p>
<p>项目中我这次的解决方法是：</p>
<pre><code>data: {&apos;id&apos;:123, &apos;title&apos;:&apos;xxxx&apos;};
$http({
    method: &apos;POST&apos;,
    url: &apos;/xxxx/xxxx&apos;,
    data: data,
    headers: {
        &apos;Content-Type&apos;: &apos;application/x-www-form-urlencoded&apos;
    },
    transformRequest: function(data) {  
        var str = &apos;&apos;;  
        for( var i in data ) {  
            str += i + &apos;=&apos; + data[i] + &apos;&amp;&apos;;  
        }  
        return str.substring(0,str.length-1);  
    }  
}).success(function(response) {
    if (response &amp;&amp; typeof callback === &apos;function&apos;) {
        callback(response.errorCode, response.message);
        scope.isLoading = false;
    } else {
        alert(&apos;删除信息出错，请稍后再试&apos;);
    }
}).error(function(response) {
    scope.isLoading = false;
    alert(&apos;删除信息出错，请稍后再试&apos;);
});
</code></pre><ul>
<li><p>第四种</p>
<pre><code>text/xml
</code></pre></li>
</ul>
<p>它是一种使用 HTTP 作为传输协议，XML 作为编码方式的远程调用规范。</p>
<p>这种方案我不太不常用，可以了解下。</p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/FrontEnd/" rel="tag">#FrontEnd</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/07/13/Mac下Ngnix安装配置/" rel="next" title="Mac下Ngnix安装配置">
                <i class="fa fa-chevron-left"></i> Mac下Ngnix安装配置
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/11/09/CSS-Fade和Display冲突问题解决方案/" rel="prev" title="CSS-Fade和Display冲突问题解决方案">
                CSS-Fade和Display冲突问题解决方案 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Overview
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="//schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar_2.png"
               alt="Jason Li" />
          <p class="site-author-name" itemprop="name">Jason Li</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/">
              <span class="site-state-item-count">80</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">7</span>
                <span class="site-state-item-name">categories</span>
              
            </div>
          

          
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">86</span>
                <span class="site-state-item-name">tags</span>
              
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/JasonLi1990" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://www.weibo.com/thelinker" target="_blank" title="weibo">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  weibo
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.facebook.com/guanqun.li.94" target="_blank" title="facebook">
                  
                    <i class="fa fa-fw fa-facebook"></i>
                  
                  facebook
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://se.linkedin.com/in/jasonli1990" target="_blank" title="linkedin">
                  
                    <i class="fa fa-fw fa-linkedin"></i>
                  
                  linkedin
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.zhihu.com/people/jasonli1990/activities" target="_blank" title="知乎">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  知乎
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#POST提交数据的几种方式"><span class="nav-number">1.</span> <span class="nav-text">POST提交数据的几种方式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#HTTP"><span class="nav-number">1.1.</span> <span class="nav-text">HTTP</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#HTTP简介"><span class="nav-number">1.1.1.</span> <span class="nav-text">HTTP简介</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#HTTP通信"><span class="nav-number">1.1.2.</span> <span class="nav-text">HTTP通信</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#URL统一资源定位符"><span class="nav-number">1.1.3.</span> <span class="nav-text">URL统一资源定位符</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#HTTP请求"><span class="nav-number">1.1.4.</span> <span class="nav-text">HTTP请求</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#请求方法"><span class="nav-number">1.2.</span> <span class="nav-text">请求方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Get请求"><span class="nav-number">1.3.</span> <span class="nav-text">Get请求</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Post请求"><span class="nav-number">1.4.</span> <span class="nav-text">Post请求</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Head请求"><span class="nav-number">1.5.</span> <span class="nav-text">Head请求</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#HTTP应答"><span class="nav-number">1.5.1.</span> <span class="nav-text">HTTP应答</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#常见的POST数据提交方式"><span class="nav-number">1.6.</span> <span class="nav-text">常见的POST数据提交方式</span></a></li></ol></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2010 - 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jason Li</span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.2"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.2"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.2"></script>



  



  




  
  

  

  

  

  


</body>
</html>
